<ion-header [translucent]="false">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/home" text=""></ion-back-button>
    </ion-buttons>
    <ion-title>{{ provider?.name || 'Detalle del Negocio' }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="false" class="provider-detail-content">
  
  <!-- Slider de im√°genes del negocio -->
  <div class="images-section" *ngIf="hasImages()">
    <div class="images-slider" #imagesSlider>
      <div class="swiper-wrapper">
        <div class="swiper-slide" *ngFor="let image of provider?.images; let i = index">
          <div class="image-container" (click)="openGallery(i)">
            <img [src]="image" [alt]="provider?.name" loading="lazy">
            <div class="image-overlay">
              <ion-icon name="expand-outline"></ion-icon>
            </div>
          </div>
        </div>
      </div>
      <!-- Paginaci√≥n: solo mostrar si hay m√°s de una imagen -->
      <div class="swiper-pagination" *ngIf="provider?.images && (provider?.images?.length ?? 0) > 1"></div>
    </div>
  </div>

  <!-- Imagen por defecto si no hay im√°genes -->
  <div class="default-image" *ngIf="hasNoImages()">
    <img src="assets/images/default-provider.png" [alt]="provider?.name">
  </div>

  <!-- Informaci√≥n principal del negocio -->
  <div class="business-info" *ngIf="provider">
    <div class="business-header">
      <ion-item style="width: 100%;">
        <ion-thumbnail slot="start" class="item-thumbnail">
          <img [src]="provider.logo" alt="Logo de {{ provider.name }}" class="business-logo" />
        </ion-thumbnail>
      
        <ion-label class="name-and-rating"> 
          <h2 class="item-title">{{ provider.name }}</h2>
          <div class="business-rating">
            <ion-icon name="star" color="warning"></ion-icon>
            <span class="rating-value">{{ getDisplayRating() }}</span>
            <span class="rating-count" *ngIf="provider.count_rating > 0">
              ({{ provider.count_rating }} {{ provider.count_rating === 1 ? 'calificaci√≥n' : 'calificaciones' }})
            </span>
            <span class="rating-count" *ngIf="provider.count_rating === 0">
              (Sin calificaciones)
            </span>
          </div>
        </ion-label>
      </ion-item>
  
    </div>

    <div class="business-category">
      <ion-icon name="business-outline"></ion-icon>
      <span>{{ getCategoryName(provider.categoryId) }}</span>
    </div>

    <div class="business-description" *ngIf="provider.description">
      <p>{{ provider.description }}</p>
    </div>

    <div class="business-distance" *ngIf="currentLocation">
      <ion-icon name="location-outline" color="primary"></ion-icon>
      <span>{{ getDistance() }} de distancia</span>
    </div>
  </div>

  <!-- Navegaci√≥n por secciones -->
  <div class="sections-nav">
    <div class="nav-item" 
         [class.active]="activeSection === 'info'"
         (click)="setActiveSection('info')">
      <ion-icon name="information-circle-outline"></ion-icon>
      <span>Informaci√≥n</span>
    </div>
    <div class="nav-item" 
         [class.active]="activeSection === 'catalog'"
         (click)="setActiveSection('catalog')">
      <ion-icon name="grid-outline"></ion-icon>
      <span>Cat√°logo</span>
    </div>
        <div class="nav-item" 
         [class.active]="activeSection === 'promo'"
         (click)="setActiveSection('promo')">
      <ion-icon name="pricetag-outline"></ion-icon>
      <span>Promo</span>
    </div>
    <div class="nav-item" 
         [class.active]="activeSection === 'reviews'"
         (click)="setActiveSection('reviews')">
      <ion-icon name="star-outline"></ion-icon>
      <span>Rese√±as</span>
    </div>
  </div>

  <!-- Secci√≥n de Informaci√≥n -->
  <div class="section-content" *ngIf="activeSection === 'info'">
    

    <!-- Botones de acci√≥n: Contacto y Calificar -->
    <div class="action-buttons-container" *ngIf="(provider?.phone_contact || provider?.phone_number) || authService.isAuthenticated()">
      <ion-button
        *ngIf="provider?.phone_contact || provider?.phone_number"
        class="action-button contact-button"
        fill="solid"
        color="success"
        (click)="contactProvider()">
        Contacto
      </ion-button>
      
      <ion-button
        *ngIf="canRate()"
        class="action-button rating-button"
        fill="outline"
        color="warning"
        (click)="openRatingModal()">
        <ion-icon name="star" slot="start"></ion-icon>
        Calificar
      </ion-button>
    </div>

    <!-- Horarios de atenci√≥n -->
    <ion-card class="schedule-card" *ngIf="provider?.schedule">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="time-outline" color="primary"></ion-icon>
          Horarios de Atenci√≥n
          <span class="status-badge" [class.open]="isOpenNow()" [class.closed]="!isOpenNow()">
            {{ isOpenNow() ? 'Abierto' : 'Cerrado' }}
          </span>
        </ion-card-title>
      </ion-card-header> 
      <ion-card-content>
        <div class="schedule-item" 
             *ngFor="let schedule of provider?.schedule"
             [class.today]="isToday(schedule)"
             [class.open-now]="isTodayAndOpen(schedule)">
          <span class="day">{{ schedule.day }}</span>
          <span class="hours">{{ schedule.start }} - {{ schedule.end }}</span>
          <span class="status-indicator" 
                *ngIf="isTodayAndOpen(schedule)"
                [class.open]="isTodayAndOpen(schedule)">
            ‚óè Abierto ahora
          </span>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Ubicaci√≥n y mapa -->
    <ion-card class="location-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="location-outline" color="primary"></ion-icon>
          Ubicaci√≥n
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="address-info">
          <p><strong>{{ provider?.address?.street }}</strong></p>
          <p>{{ provider?.address?.city }}, {{ provider?.address?.departament }}</p>
          <p>{{ provider?.address?.country }}</p>
        </div>
        
        <!-- Mapa con Google Maps (siempre) -->
        <div class="map-container" *ngIf="provider?.address?.location">
          <div class="map-wrapper">
            <div id="providerMap" #providerMap style="width:100%; height:300px; border-radius:12px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center;">
              <div *ngIf="!googleMapsAvailable" style="text-align: center; color: #666;">
                <ion-spinner name="crescent"></ion-spinner>
                <p>Cargando mapa...</p>
              </div>
            </div>

            <div class="map-overlay" (click)="openFullScreenMap()">
              <ion-icon name="expand-outline"></ion-icon>
              <span>Ampliar mapa</span>
            </div>
          </div>
          <div class="map-info">
            <div class="distance-info">
              <ion-icon name="navigate-outline"></ion-icon>
              <span><strong>Distancia:</strong> {{ getDistance() }}</span>
            </div>
            <div class="route-info" *ngIf="currentLocation" (click)="openDirections()" style="cursor: pointer;">
              <ion-icon name="location-outline"></ion-icon>
              <span>Ruta desde tu ubicaci√≥n</span>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Secci√≥n de Rese√±as -->
  <div class="section-content" *ngIf="activeSection === 'reviews'">
    <!-- Bot√≥n para calificar -->
    <ion-card class="rating-card" *ngIf="canRate()">
      <ion-card-content>
        <ion-button
          expand="block"
          fill="outline"
          color="warning"
          (click)="openRatingModal()">
          <ion-icon name="star" slot="start"></ion-icon>
          Calificar este establecimiento
        </ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Lista de rese√±as -->
    <ion-card class="reviews-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="star" color="warning"></ion-icon>
          Calificaciones y Rese√±as
          <span class="reviews-count" *ngIf="reviews.length > 0">
            ({{ reviews.length }})
          </span>
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div *ngIf="isLoadingReviews" class="loading-reviews">
          <ion-spinner></ion-spinner>
          <p>Cargando rese√±as...</p>
        </div>

        <div *ngIf="!isLoadingReviews && reviews.length === 0" class="no-reviews">
          <ion-icon name="star-outline" size="large"></ion-icon>
          <p>No hay rese√±as a√∫n</p>
          <p class="subtitle">S√© el primero en calificar este establecimiento</p>
        </div>

        <div *ngIf="!isLoadingReviews && reviews.length > 0" class="reviews-list">
          <div class="review-item" *ngFor="let review of reviews">
            <div class="review-header">
              <div class="review-author">
                <ion-avatar>
                  <!-- üî• Mostrar foto de perfil del usuario, si no hay, mostrar icono -->
                  <img 
                    *ngIf="review.userProfileImage" 
                    [src]="review.userProfileImage" 
                    [alt]="review.name"
                    (error)="onReviewImageError($event)">
                  <ion-icon name="person" *ngIf="!review.userProfileImage"></ion-icon>
                </ion-avatar>
                <div class="review-info">
                  <h3>{{ review.name || 'Usuario an√≥nimo' }}</h3>
                  <p class="review-date">{{ review.createdAt }}</p>
                </div>
              </div>
              <div class="review-rating">
                <ion-icon 
                  *ngFor="let star of [1,2,3,4,5]"
                  [name]="star <= review.rating ? 'star' : 'star-outline'"
                  [color]="star <= review.rating ? 'warning' : 'medium'">
                </ion-icon>
              </div>
            </div>
            <div class="review-content" *ngIf="review.comment">
              <p>{{ review.comment }}</p>
            </div>
            <div class="review-image" *ngIf="review.image">
              <img [src]="review.image" [alt]="'Imagen de ' + review.name">
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Secci√≥n de Cat√°logo -->
  <div class="section-content" *ngIf="activeSection === 'catalog'">
    
    <!-- Contenido del cat√°logo (p√∫blico, sin requerir autenticaci√≥n) -->
    <!-- Filtros de productos con slider -->
    <div class="product-filters" *ngIf="productCategories.length > 0">
        <div class="category-slider-container">
          <div class="category-slider" #categorySlider>
            <div class="swiper-wrapper">
              <div class="swiper-slide" *ngFor="let category of productCategories">
                <ion-button 
                  [fill]="selectedCategory === category ? 'solid' : 'outline'"
                  [color]="selectedCategory === category ? 'primary' : 'medium'"
                  (click)="onProductCategoryChange(category)"
                  class="category-button">
                  {{ formatCategoryLabel(category) }}
                </ion-button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista de productos agrupada por categor√≠a (estilo WhatsApp Business) -->
      <div class="products-list-container" *ngIf="products.length > 0">
        <div class="products-by-category" *ngFor="let category of getCategoriesWithProducts()">
          <!-- Header de categor√≠a -->
          <div class="category-header">
            <h3>{{ formatCategoryLabel(category) }}</h3>
            <span class="product-count">{{ getProductsByCategory(category).length }} productos</span>
          </div>
          
          <!-- Lista de productos de esta categor√≠a -->
          <div class="products-list">
            <div class="product-item" *ngFor="let product of getProductsByCategory(category)" (click)="openProductModal(product)">
              <div class="product-content">
                <!-- Imagen del producto -->
                <div class="product-image-container">
                  <div class="product-image" *ngIf="product.images && product.images.length > 0">
                    <img [src]="product.images[0]" [alt]="product.name" loading="lazy">
                    <div class="featured-badge" *ngIf="product.featured">
                      <ion-icon name="star" color="warning"></ion-icon>
                    </div>
                  </div>
                  <div class="product-image default" *ngIf="!product.images || product.images.length === 0">
                    <ion-icon name="image-outline"></ion-icon>
                  </div>
                </div>
                
                <!-- Informaci√≥n del producto -->
                <div class="product-info">
                  <div class="product-header">
                    <h4 class="product-name">{{ product.name }}</h4>
                    <div class="product-price">
                      <span class="price" *ngIf="product.price">{{ formatPrice(product.price) }}</span>
                      <span class="no-price" *ngIf="!product.price">Consultar precio</span>
                    </div>
                  </div>
                  
                  <p class="product-description">{{ product.description }}</p>
                  
                  <div class="product-details">
                    <div class="product-stock" *ngIf="product.stock !== null && product.stock !== undefined">
                      <ion-icon name="cube-outline" color="medium"></ion-icon>
                      <span>{{ product.stock }} disponibles</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Mensaje cuando no hay productos -->
      <div class="no-products" *ngIf="products.length === 0 && !isLoadingProducts">
        <ion-icon name="grid-outline"></ion-icon>
        <h3>No hay productos disponibles</h3>
        <p>Este negocio a√∫n no ha agregado productos a su cat√°logo.</p>
      </div>

      <!-- Loading de productos -->
      <div class="loading-products" *ngIf="isLoadingProducts">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Cargando productos...</p>
      </div>

    <!-- Bot√≥n para cargar m√°s productos -->
    <div class="load-more" *ngIf="hasMoreProducts && !isLoadingProducts">
      <ion-button 
        expand="block" 
        fill="outline" 
        (click)="loadProducts()">
        <ion-icon name="add" slot="start"></ion-icon>
        Cargar m√°s productos
      </ion-button>
    </div>
  </div>

  <!-- Secci√≥n de Promociones -->
  <div class="section-content" *ngIf="activeSection === 'promo'">
    
    <!-- Contenido de promociones (p√∫blico, sin requerir autenticaci√≥n) -->
    <ion-card class="promotions-card" *ngIf="promotions.length > 0">
      <ion-card-header>
        
      </ion-card-header>
      <ion-card-content>
        <div class="promotions-list">
          <!-- üî• Agregar clase .inactive para diferenciar visualmente -->
          <div class="promotion-item" [class.inactive]="!promotion.isActive" *ngFor="let promotion of promotions">
            <div class="promotion-header">
              <!-- üî• Usar promotion_text en lugar de title -->
              <h3 class="promotion-title">{{ promotion.promotion_text || promotion.title }}</h3>
              <span class="promotion-badge" [class.active]="promotion.isActive">
                {{ promotion.isActive ? '‚úÖ Activa' : '‚ö™ Inactiva' }}
              </span>
            </div>
            
            <!-- üî• Mostrar tipo de promoci√≥n -->
            <div class="promotion-type" *ngIf="promotion.promotion_type">
              <ion-chip color="primary">
                <ion-icon name="pricetag"></ion-icon>
                <ion-label>{{ promotion.promotion_type }}</ion-label>
              </ion-chip>
            </div>
            
            <div class="promotion-details">
              <!-- üî• Mostrar radio de alcance -->
              <div class="promotion-radius" *ngIf="promotion.promo_radius_meters">
                <ion-icon name="location-outline"></ion-icon>
                <span>Radio: {{ (promotion.promo_radius_meters / 1000).toFixed(1) }}km</span>
              </div>
              
              <!-- üî• Mostrar fecha de validez -->
              <div class="promotion-validity" *ngIf="promotion.endDate">
                <ion-icon name="calendar-outline"></ion-icon>
                <span>V√°lido hasta: {{ promotion.endDate | date:'dd/MM/yyyy' }}</span>
              </div>
            </div>
            
            <!-- üî• Estad√≠sticas de delivery -->
            <!--<div class="promotion-stats" *ngIf="promotion.deliveryStats">
              <ion-chip outline color="success">  
                <ion-icon name="paper-plane"></ion-icon>
                <ion-label>{{ promotion.deliveryStats.totalSent || 0 }} enviadas</ion-label>
              </ion-chip>
              <ion-chip outline color="warning">
                <ion-icon name="notifications"></ion-icon>
                <ion-label>{{ promotion.deliveryStats.totalOpened || 0 }} abiertas</ion-label>
              </ion-chip>
              <ion-chip outline color="primary">
                <ion-icon name="eye"></ion-icon>
                <ion-label>{{ promotion.deliveryStats.totalViews || 0 }} vistas</ion-label>
              </ion-chip>
            </div>-->
            
            <!-- üî• Desglose de fuentes de vistas (opcional, solo para admins o vista detallada) -->
            <div class="promotion-sources" *ngIf="promotion.deliveryStats?.viewSources && showDetailedStats">
              <div class="source-item">
                <ion-icon name="notifications-outline"></ion-icon>
                <span>Notificaci√≥n: {{ promotion.deliveryStats.viewSources.fromNotification || 0 }}</span>
              </div>
              <div class="source-item">
                <ion-icon name="home-outline"></ion-icon>
                <span>Home: {{ promotion.deliveryStats.viewSources.fromHomeCard || 0 }}</span>
              </div>
              <div class="source-item">
                <ion-icon name="list-outline"></ion-icon>
                <span>Cercanas: {{ promotion.deliveryStats.viewSources.fromNearbyList || 0 }}</span>
              </div>
              <div class="source-item">
                <ion-icon name="storefront-outline"></ion-icon>
                <span>Detalle: {{ promotion.deliveryStats.viewSources.fromProviderDetail || 0 }}</span>
              </div>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Mensaje cuando no hay promociones -->
    <ion-card class="no-promotions-card" *ngIf="promotions.length === 0 && !isLoadingPromotions">
      <ion-card-content>
        <div class="no-promotions-message">
          <ion-icon name="pricetag-outline" color="medium" size="large"></ion-icon>
          <h3>No hay promociones disponibles</h3>
          <p>Este negocio no tiene promociones activas en este momento.</p>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Loading state -->
    <ion-card class="loading-card" *ngIf="isLoadingPromotions">
      <ion-card-content>
        <div class="loading-message">
          <ion-spinner name="crescent"></ion-spinner>
          <p>Cargando promociones...</p>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

</ion-content>

<!-- Modal de detalles del producto -->
<ion-modal [isOpen]="isProductModalOpen" (didDismiss)="closeProductModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Detalles del Producto</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeProductModal()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    
    <ion-content *ngIf="selectedProduct">
      <div class="product-modal-content">
        <!-- Imagen grande del producto -->
        <div class="product-modal-image">
          <div class="product-image-large" *ngIf="selectedProduct.images && selectedProduct.images.length > 0">
            <img [src]="selectedProduct.images[0]" [alt]="selectedProduct.name">
            <div class="featured-badge-large" *ngIf="selectedProduct.featured">
              <ion-icon name="star" color="warning"></ion-icon>
              <span>Destacado</span>
            </div>
          </div>
          <div class="product-image-large default" *ngIf="!selectedProduct.images || selectedProduct.images.length === 0">
            <ion-icon name="image-outline"></ion-icon>
            <p>Sin imagen</p>
          </div>
        </div>
        
        <!-- Informaci√≥n del producto -->
        <div class="product-modal-info">
          <div class="product-modal-header">
            <h1 class="product-modal-name">{{ selectedProduct.name }}</h1>
            <div class="product-modal-price">
              <span class="price-large" *ngIf="selectedProduct.price">{{ formatPrice(selectedProduct.price) }}</span>
              <span class="no-price-large" *ngIf="!selectedProduct.price">Consultar precio</span>
            </div>
          </div>
          
          <div class="product-modal-description">
            <h3>Descripci√≥n</h3>
            <p>{{ selectedProduct.description }}</p>
          </div>
          
          <div class="product-modal-details">
            <div class="detail-item" *ngIf="selectedProduct.category">
              <ion-icon name="pricetag-outline" color="primary"></ion-icon>
              <div class="detail-content">
                <span class="detail-label">Categor√≠a</span>
                <span class="detail-value">{{ formatCategoryLabel(selectedProduct.category) }}</span>
              </div>
            </div>
            
            <div class="detail-item" *ngIf="selectedProduct.stock !== null && selectedProduct.stock !== undefined">
              <ion-icon name="cube-outline" color="primary"></ion-icon>
              <div class="detail-content">
                <span class="detail-label">Disponibilidad</span>
                <span class="detail-value">{{ selectedProduct.stock }} disponibles</span>
              </div>
            </div>
            
            <div class="detail-item" *ngIf="selectedProduct.tags && selectedProduct.tags.length > 0">
              <ion-icon name="bookmark-outline" color="primary"></ion-icon>
              <div class="detail-content">
                <span class="detail-label">Etiquetas</span>
                <div class="tags-container">
                  <ion-chip *ngFor="let tag of selectedProduct.tags" color="light">
                    <ion-label>{{ tag }}</ion-label>
                  </ion-chip>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ion-content>
    
    <ion-footer>
      <ion-toolbar>
        <div class="modal-footer-content">
          <ion-button 
            expand="block" 
            color="success" 
            size="large"
            (click)="openWhatsAppForProduct()">
            <ion-icon name="logo-whatsapp" slot="start"></ion-icon>
            Solicitar por WhatsApp
          </ion-button>
        </div>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-modal>

<!-- Modal de mapa en pantalla completa -->
<ion-modal [isOpen]="isMapModalOpen" (didDismiss)="closeMapModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Ubicaci√≥n del Negocio</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeMapModal()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    
    <ion-content>
      <div class="fullscreen-map-container" *ngIf="provider?.address?.location">
        <div id="providerMapFull" #providerMapFull style="width:100%; height:100%;"></div>
        
        <!-- Botones de acci√≥n flotantes -->
        <div class="map-actions" *ngIf="provider?.address?.location">
          <ion-button 
            fill="solid" 
            color="primary" 
            class="navigation-btn"
            (click)="showNavigationInfo()">
            <ion-icon name="information-circle" slot="start"></ion-icon>
            Info Ubicaci√≥n
          </ion-button>
        </div>
        
        <!-- Informaci√≥n del negocio -->
        <div class="map-business-info" *ngIf="provider">
          <div class="business-card">
            <h3>{{ provider.name }}</h3>
            <p *ngIf="provider.address?.street">{{ provider.address.street }}</p>
            <p *ngIf="getDistance() !== 'Distancia no disponible'">
              <ion-icon name="navigate-outline"></ion-icon>
              {{ getDistance() }}
            </p>
          </div>
        </div>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- Modal de galer√≠a de im√°genes - Estilo Tinder -->
<ion-modal [isOpen]="isGalleryModalOpen" (didDismiss)="closeGalleryModal()" [presentingElement]="null">
  <ng-template>
    <!-- Contenido de pantalla completa -->
    <div class="gallery-container" *ngIf="provider?.images?.length">
      <!-- Bot√≥n de cerrar flotante -->
      <ion-button (click)="closeGalleryModal()" fill="clear" class="gallery-close-button">
        <ion-icon name="close" color="light"></ion-icon>
      </ion-button>
      <div class="swiper gallery-swiper" #gallerySlider>
        <div class="swiper-wrapper">
          <div class="swiper-slide" *ngFor="let image of provider?.images; let i = index">
            <div class="swiper-zoom-container">
              <div class="gallery-image-container">
                <img [src]="image" [alt]="'Imagen ' + (i + 1)" class="gallery-image">
              </div>
            </div>
          </div>
        </div>
        
        <!-- Navegaci√≥n discreta -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
      
      <!-- Contador de im√°genes (fuera del swiper para mejor posicionamiento) -->
      <div class="swiper-pagination"></div>
    </div>
  </ng-template>
</ion-modal>